# 코드 정리 및 개선 기획안

## 📋 개요

이 문서는 PAU 홈페이지 프로젝트의 코드 품질 개선을 위한 단계별 계획을 제시합니다. 관리자 페이지 구현 전에 코드베이스를 정리하고 최적화하여 유지보수성과 성능을 향상시키는 것을 목표로 합니다.

---

## 🎯 목표

1. **코드 품질 향상**: 불필요한 코드 제거, 중복 제거, 일관성 확보
2. **성능 최적화**: 로딩 속도 개선, 번들 크기 최적화
3. **에러 핸들링 강화**: 사용자 경험 개선 및 안정성 향상
4. **접근성 개선**: 모든 사용자가 접근 가능한 웹사이트 구현
5. **유지보수성 향상**: 코드 구조 개선으로 향후 개발 효율성 증대

---

## 📊 작업 항목 및 우선순위

### Phase 1: 사용하지 않는 코드 정리 (우선순위: 높음)

#### 1.1 사용하지 않는 Import 제거
**목표**: 번들 크기 감소 및 코드 가독성 향상

**작업 내용**:
- [x] 모든 파일에서 사용하지 않는 import 식별
- [x] TypeScript 컴파일러 경고 확인
- [x] ESLint 규칙 적용 (unused-imports)
- [x] 각 컴포넌트별 import 정리

**대상 파일**:
- `App.tsx` - 72개의 icon import 중 실제 사용 여부 확인
- `components/*.tsx` - 각 컴포넌트별 import 검토
- `hooks/*.ts` - 사용하지 않는 React hooks import 확인

**예상 효과**:
- 번들 크기 5-10% 감소
- 빌드 시간 단축
- 코드 가독성 향상

---

#### 1.2 사용하지 않는 변수/함수 제거
**목표**: 코드베이스 정리 및 혼란 방지

**작업 내용**:
- [x] 사용하지 않는 state 변수 식별
- [x] 사용하지 않는 함수/메서드 제거
- [x] 주석 처리된 코드 정리
- [x] 데드 코드(dead code) 제거

**대상 파일**:
- `App.tsx` - `isPending` 변수 사용 여부 확인
- `components/Admin.tsx` - 사용하지 않는 helper 함수 확인
- 모든 컴포넌트 파일

**예상 효과**:
- 코드 복잡도 감소
- 유지보수 용이성 향상

---

#### 1.3 중복 코드 식별 및 정리
**목표**: DRY 원칙 적용으로 코드 중복 제거

**작업 내용**:
- [x] 반복되는 스타일 패턴 식별
- [x] 공통 로직을 유틸리티 함수로 추출
- [x] 유사한 컴포넌트 구조 통합
- [x] 상수 값 중앙화

**대상 영역**:
- 반복되는 CSS 클래스 패턴
- 유사한 카드/섹션 레이아웃
- 공통 유효성 검사 로직
- 날짜 포맷팅 함수

**예상 효과**:
- 코드 라인 수 10-15% 감소
- 버그 발생 가능성 감소
- 일관성 향상

---

### Phase 2: 에러 핸들링 강화 (우선순위: 높음)

#### 2.1 전역 에러 바운더리 구현
**목표**: 예상치 못한 에러로 인한 앱 크래시 방지

**작업 내용**:
- [x] `ErrorBoundary` 컴포넌트 생성
- [x] React Error Boundary 패턴 적용
- [x] 에러 로깅 시스템 연동
- [x] 사용자 친화적 에러 UI 구현

**구현 계획**:
```typescript
// components/common/ErrorBoundary.tsx
- componentDidCatch 메서드 구현
- 에러 상태 관리
- 폴백 UI 제공
- 에러 리포트 기능
```

**대상 영역**:
- `App.tsx` 최상위 레벨
- 주요 페이지 컴포넌트
- 번역 서비스 호출 부분

**예상 효과**:
- 앱 안정성 향상
- 사용자 경험 개선
- 디버깅 효율성 향상

---

#### 2.2 API 호출 에러 핸들링 개선
**목표**: 네트워크 에러 및 API 실패 시 적절한 처리

**작업 내용**:
- [x] Gemini API 호출 재시도 로직 추가
- [x] 타임아웃 처리
- [x] 네트워크 에러 감지 및 사용자 알림
- [x] API 키 누락 시 명확한 에러 메시지

**대상 파일**:
- `services/geminiService.ts`
- `hooks/useTranslation.ts`

**구현 계획**:
```typescript
// services/geminiService.ts
- 재시도 로직 (최대 3회)
- 지수 백오프(exponential backoff)
- 타임아웃 설정 (30초)
- 상세한 에러 메시지
```

**예상 효과**:
- 일시적 네트워크 문제 대응
- 사용자에게 명확한 피드백 제공
- 서비스 안정성 향상

---

#### 2.3 사용자 친화적 에러 메시지
**목표**: 기술적 에러를 사용자가 이해할 수 있는 메시지로 변환

**작업 내용**:
- [x] 에러 타입별 메시지 매핑
- [x] 다국어 에러 메시지 지원
- [x] 에러 발생 시 복구 방법 제시
- [x] 에러 로깅 및 모니터링

**구현 계획**:
```typescript
// utils/errorMessages.ts
- 에러 코드별 메시지 정의
- 번역 지원
- 복구 액션 제시
```

**예상 효과**:
- 사용자 혼란 감소
- 지원 요청 감소
- 사용자 만족도 향상

---

### Phase 3: 성능 최적화 (우선순위: 중간)

#### 3.1 코드 스플리팅 (Code Splitting)
**목표**: 초기 로딩 시간 단축

**작업 내용**:
- [x] React.lazy를 사용한 라우트별 코드 스플리팅
- [x] 컴포넌트 레벨 lazy loading
- [x] 동적 import 적용
- [x] 로딩 스켈레톤 UI 구현

**대상 컴포넌트**:
- `components/Admin.tsx` (관리자 페이지는 자주 접근하지 않음)
- `components/CampusVisualizer.tsx` (무거운 컴포넌트)
- `components/Calendar.tsx`
- `components/Library.tsx`

**구현 계획**:
```typescript
// App.tsx
const Admin = React.lazy(() => import('./components/Admin'));
const CampusVisualizer = React.lazy(() => import('./components/CampusVisualizer'));

// Suspense로 감싸기
<Suspense fallback={<LoadingSpinner />}>
  <Admin />
</Suspense>
```

**예상 효과**:
- 초기 번들 크기 30-40% 감소
- 초기 로딩 시간 2-3초 단축
- 사용자 경험 개선

---

#### 3.2 이미지 최적화 및 Lazy Loading
**목표**: 이미지 로딩 성능 향상

**작업 내용**:
- [x] 이미지 lazy loading 구현
- [ ] WebP 포맷 지원 (향후 개선)
- [ ] 반응형 이미지 (srcset) 적용 (향후 개선)
- [ ] 이미지 압축 최적화 (향후 개선)

**대상 영역**:
- 교수진 프로필 사진
- 뉴스 이미지
- Hero 섹션 배경 이미지
- Clinic 이미지

**구현 계획**:
```typescript
// components/common/LazyImage.tsx
- Intersection Observer API 사용
- 로딩 플레이스홀더
- 에러 처리
- 반응형 이미지 지원
```

**예상 효과**:
- 초기 페이지 로딩 시간 1-2초 단축
- 대역폭 사용량 감소
- 모바일 사용자 경험 개선

---

#### 3.3 번역 결과 캐싱
**목표**: 중복 번역 요청 방지 및 성능 향상

**작업 내용**:
- [x] 번역 결과 localStorage 캐싱 (이미 구현됨)
- [x] 캐시 키 전략 설계 (이미 구현됨)
- [x] 캐시 만료 정책 구현 (이미 구현됨)
- [x] 캐시 무효화 로직 (이미 구현됨)

**구현 계획**:
```typescript
// hooks/useTranslationCache.ts
- 캐시 키 생성 (content + language)
- localStorage 저장/조회
- TTL (Time To Live) 설정 (24시간)
- 캐시 히트율 모니터링
```

**예상 효과**:
- API 호출 횟수 60-70% 감소
- 번역 속도 향상 (캐시 히트 시 즉시)
- API 비용 절감
- 사용자 경험 개선

---

#### 3.4 메모이제이션 최적화
**목표**: 불필요한 리렌더링 방지

**작업 내용**:
- [x] React.memo 적용 (적절한 곳에만)
- [x] useMemo로 무거운 계산 최적화
- [x] useCallback으로 함수 메모이제이션 (이미 구현됨)
- [ ] 리렌더링 프로파일링 (향후 개선)

**대상 컴포넌트**:
- 리스트 렌더링 컴포넌트
- 무거운 계산이 있는 컴포넌트
- 자주 리렌더링되는 컴포넌트

**예상 효과**:
- 리렌더링 횟수 감소
- CPU 사용량 감소
- 부드러운 사용자 인터랙션

---

### Phase 4: 컴포넌트 리팩토링 (우선순위: 중간)

#### 4.1 커스텀 훅 추출
**목표**: 재사용 가능한 로직을 훅으로 분리

**작업 내용**:
- [x] 공통 상태 관리 로직 훅화 (useForm)
- [ ] API 호출 로직 훅화 (향후 개선)
- [ ] 폼 유효성 검사 훅화 (향후 개선)
- [ ] 이벤트 핸들러 훅화 (향후 개선)

**대상 훅**:
```typescript
// hooks/useForm.ts - 폼 상태 관리
// hooks/useApi.ts - API 호출 및 에러 처리
// hooks/useLocalStorage.ts - localStorage 관리
// hooks/useDebounce.ts - 디바운스 로직
// hooks/useMediaQuery.ts - 반응형 로직
```

**예상 효과**:
- 코드 재사용성 향상
- 테스트 용이성 향상
- 로직 분리로 가독성 향상

---

#### 4.2 공통 컴포넌트 패턴 통합
**목표**: 유사한 컴포넌트 구조 통합

**작업 내용**:
- [x] 카드 컴포넌트 통합 (InfoCard, StepCard 이미 완료)
- [x] 버튼 컴포넌트 통합 (Button 컴포넌트 생성)
- [x] 입력 필드 컴포넌트 통합 (Input 컴포넌트 생성)
- [ ] 리스트 아이템 컴포넌트 통합 (향후 개선)

**대상 컴포넌트**:
- `components/common/InfoCard.tsx` - 정보 카드 (이미 완료)
- `components/common/StepCard.tsx` - 단계 카드 (이미 완료)
- `components/common/Button.tsx` - 버튼 변형 통합 (완료)
- `components/common/Input.tsx` - 입력 필드 통합 (완료)

**예상 효과**:
- 컴포넌트 수 감소
- 일관성 향상
- 유지보수 용이성 향상

---

#### 4.3 유틸리티 함수 중앙화
**목표**: 공통 유틸리티 함수를 한 곳에서 관리

**작업 내용**:
- [x] 날짜 포맷팅 함수 통합
- [x] 문자열 유틸리티 통합
- [x] 유효성 검사 함수 통합
- [x] 데이터 변환 함수 통합

**구현 계획**:
```typescript
// utils/dateUtils.ts - 날짜 관련 유틸리티
// utils/stringUtils.ts - 문자열 처리
// utils/validation.ts - 유효성 검사
// utils/format.ts - 포맷팅 함수
```

**예상 효과**:
- 코드 중복 제거
- 버그 수정 용이성 향상
- 테스트 용이성 향상

---

### Phase 5: 접근성 개선 (우선순위: 중간)

#### 5.1 ARIA 레이블 및 속성 추가
**목표**: 스크린 리더 사용자를 위한 접근성 향상

**작업 내용**:
- [x] 모든 인터랙티브 요소에 aria-label 추가
- [x] 폼 필드에 aria-describedby 추가
- [x] 랜드마크 역할(role) 정의
- [x] 상태 변경 시 aria-live 영역 사용

**대상 영역**:
- 네비게이션 메뉴
- 버튼 및 링크
- 폼 입력 필드
- 모달 및 드롭다운
- 이미지 (alt 텍스트 개선)

**구현 계획**:
```typescript
// 접근성 가이드라인 준수
- WCAG 2.1 AA 레벨 준수
- 키보드 네비게이션 지원
- 포커스 관리
- 스크린 리더 테스트
```

**예상 효과**:
- 접근성 점수 향상 (Lighthouse)
- 법적 준수 (ADA, Section 508)
- 사용자 범위 확대

---

#### 5.2 키보드 네비게이션 개선
**목표**: 마우스 없이도 모든 기능 사용 가능

**작업 내용**:
- [x] Tab 순서 최적화
- [x] 키보드 단축키 추가
- [x] 포커스 트랩 (모달 내)
- [x] 포커스 스타일 개선

**대상 영역**:
- 드롭다운 메뉴
- 모달 다이얼로그
- 탭 인터페이스
- 폼 입력

**구현 계획**:
```typescript
// 키보드 이벤트 핸들러
- Enter/Space: 활성화
- Escape: 닫기
- Arrow keys: 네비게이션
- Tab: 다음 요소
- Shift+Tab: 이전 요소
```

**예상 효과**:
- 키보드 사용자 경험 개선
- 접근성 점수 향상
- 사용성 향상

---

#### 5.3 색상 대비 및 시각적 접근성
**목표**: 시각 장애인을 위한 접근성 향상

**작업 내용**:
- [x] 색상 대비 비율 확인 (WCAG AA: 4.5:1)
- [x] 색상에만 의존하지 않는 정보 전달
- [x] 포커스 인디케이터 개선
- [x] 텍스트 크기 조절 기능

**대상 영역**:
- 모든 텍스트와 배경
- 버튼 및 링크
- 에러 메시지
- 상태 표시

**구현 계획**:
```typescript
// 접근성 검사 도구 사용
- Lighthouse 접근성 감사
- axe DevTools
- WAVE (Web Accessibility Evaluation Tool)
- 색상 대비 계산기
```

**예상 효과**:
- WCAG 준수
- 시각 장애인 접근성 향상
- 법적 리스크 감소

---

#### 5.4 스크린 리더 최적화
**목표**: 스크린 리더 사용자 경험 개선

**작업 내용**:
- [x] 의미론적 HTML 사용
- [x] 숨김 텍스트 추가 (필요시)
- [x] 라이브 영역(live regions) 구현
- [x] 스크린 리더 테스트

**대상 영역**:
- 페이지 구조 (header, main, footer)
- 네비게이션
- 폼 레이블
- 에러 메시지
- 성공 메시지

**구현 계획**:
```typescript
// 스크린 리더 테스트
- NVDA (Windows)
- JAWS (Windows)
- VoiceOver (macOS/iOS)
- TalkBack (Android)
```

**예상 효과**:
- 시각 장애인 사용자 경험 개선
- 접근성 점수 향상
- 포용성 향상

---

## 📅 구현 일정

### Week 1: Phase 1 (사용하지 않는 코드 정리)
- Day 1-2: Import 정리 및 변수/함수 제거
- Day 3-4: 중복 코드 식별 및 정리
- Day 5: 테스트 및 검증

### Week 2: Phase 2 (에러 핸들링 강화)
- Day 1-2: 전역 에러 바운더리 구현
- Day 3-4: API 에러 핸들링 개선
- Day 5: 에러 메시지 개선 및 테스트

### Week 3: Phase 3 (성능 최적화)
- Day 1-2: 코드 스플리팅 구현
- Day 3: 이미지 최적화
- Day 4: 번역 캐싱 구현
- Day 5: 메모이제이션 최적화

### Week 4: Phase 4 (컴포넌트 리팩토링)
- Day 1-2: 커스텀 훅 추출
- Day 3-4: 공통 컴포넌트 통합
- Day 5: 유틸리티 함수 중앙화

### Week 5: Phase 5 (접근성 개선)
- Day 1-2: ARIA 레이블 및 속성 추가
- Day 3: 키보드 네비게이션 개선
- Day 4: 색상 대비 및 시각적 접근성
- Day 5: 스크린 리더 최적화 및 최종 테스트

---

## 📊 성공 지표

### 코드 품질
- [ ] 사용하지 않는 import 0개
- [ ] 코드 중복률 10% 이하
- [ ] TypeScript 에러 0개
- [ ] ESLint 경고 0개

### 성능
- [ ] 초기 로딩 시간 3초 이하
- [ ] Lighthouse Performance 점수 90 이상
- [ ] 번들 크기 30% 감소
- [ ] 번역 캐시 히트율 60% 이상

### 에러 핸들링
- [ ] 전역 에러 바운더리 적용
- [ ] API 재시도 성공률 95% 이상
- [ ] 사용자 친화적 에러 메시지 100%

### 접근성
- [ ] Lighthouse Accessibility 점수 95 이상
- [ ] WCAG 2.1 AA 레벨 준수
- [ ] 키보드 네비게이션 100% 지원
- [ ] 스크린 리더 테스트 통과

---

## 🛠️ 사용 도구

### 코드 분석
- **ESLint**: 코드 품질 검사
- **TypeScript**: 타입 체크
- **Bundle Analyzer**: 번들 크기 분석

### 성능 측정
- **Lighthouse**: 성능 및 접근성 점수
- **Chrome DevTools**: 프로파일링
- **WebPageTest**: 로딩 시간 측정

### 접근성 검사
- **axe DevTools**: 접근성 검사
- **WAVE**: 웹 접근성 평가
- **Lighthouse**: 접근성 감사

---

## ⚠️ 주의사항

1. **점진적 개선**: 한 번에 모든 것을 변경하지 말고 단계적으로 진행
2. **테스트 필수**: 각 단계마다 충분한 테스트 수행
3. **백업**: 주요 변경 전 Git 커밋
4. **성능 모니터링**: 변경 후 성능 지표 확인
5. **사용자 피드백**: 접근성 개선 시 실제 사용자 테스트

---

## 📝 체크리스트

### Phase 1: 사용하지 않는 코드 정리
- [ ] 모든 파일의 import 정리 완료
- [ ] 사용하지 않는 변수/함수 제거 완료
- [ ] 중복 코드 식별 및 정리 완료
- [ ] 코드 리뷰 및 검증 완료

### Phase 2: 에러 핸들링 강화
- [ ] 전역 에러 바운더리 구현 완료
- [ ] API 에러 핸들링 개선 완료
- [ ] 사용자 친화적 에러 메시지 구현 완료
- [ ] 에러 로깅 시스템 연동 완료

### Phase 3: 성능 최적화
- [ ] 코드 스플리팅 구현 완료
- [ ] 이미지 lazy loading 구현 완료
- [ ] 번역 캐싱 구현 완료
- [ ] 메모이제이션 최적화 완료
- [ ] 성능 측정 및 검증 완료

### Phase 4: 컴포넌트 리팩토링
- [ ] 커스텀 훅 추출 완료
- [ ] 공통 컴포넌트 통합 완료
- [ ] 유틸리티 함수 중앙화 완료
- [ ] 리팩토링 후 테스트 완료

### Phase 5: 접근성 개선
- [ ] ARIA 레이블 및 속성 추가 완료
- [ ] 키보드 네비게이션 개선 완료
- [ ] 색상 대비 개선 완료
- [ ] 스크린 리더 최적화 완료
- [ ] 접근성 검사 통과 완료

---

## 🎯 최종 목표

이 기획안을 완료하면:
- ✅ 깔끔하고 유지보수 가능한 코드베이스
- ✅ 빠르고 효율적인 웹사이트
- ✅ 안정적이고 신뢰할 수 있는 에러 핸들링
- ✅ 모든 사용자가 접근 가능한 웹사이트
- ✅ 관리자 페이지 구현을 위한 견고한 기반

---

**작성일**: 2025-01-05  
**버전**: 1.0  
**작성자**: AI Assistant

